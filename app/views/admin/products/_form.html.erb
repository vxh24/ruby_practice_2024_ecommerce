<%= form_with(model: [:admin, product], local: true) do |f| %>
  <%= render "shared/error_messages", object: f.object %>

  <div class="mb-3">
    <%= f.label "Name", class: "form-label" %>
    <%= f.text_field :name, class: "form-control" %>
  </div>

  <div class="mb-3">
    <%= f.label "Description", class: "form-label" %>
    <%= f.text_area :description, class: "form-control", rows: 3 %>
  </div>

  <div class="mb-3">
    <%= f.label "Price", class: "form-label" %>
    <%= f.number_field :price, class: "form-control" %>
  </div>

  <div class="mb-3">
    <%= f.label "Stock Quantity", class: "form-label" %>
    <%= f.number_field :stock_quantity, class: "form-control" %>
  </div>

  <div class="mb-3">
    <%= f.label "Category", class: "form-label" %>
    <%= f.select :category_id, category_options, { prompt: 'Select a category' }, class: "form-control" %>
  </div>

  <div class="mb-3">
    <%= f.label "Image", class: "form-label" %>

    <% if @product.image.attached? %>
      <div>
        <img src="<%= url_for(@product.image) %>" alt="Current Image" style="max-width: 150px; margin-bottom: 10px;" />
        <p><strong>Current file:</strong> <%= @product.image.filename.to_s %></p>
      </div>
    <% else %>
      <p>No image uploaded.</p>
    <% end %>

    <%= f.file_field :image, class: "form-control" %>
  </div>

  <%= f.submit "Create product", class: "btn btn-primary" %>
<% end %>
